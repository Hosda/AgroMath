<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa</title>
    <link rel="stylesheet" href="/CSS/containt.css">
    <link rel="stylesheet" href="/CSS/map.css">
</head>
<body>
    
    <div id="iframe-container">
        <iframe id="iframe" src="ol_map.html"></iframe>
    </div>
    <p></p>
    <div class="comentario" style="text-align: center;">
        <h1 class="title" >Sua área:</h1>
        <p id="m" class="comentario-menor" style="padding-left: 2%;">Selecione seu terreno no mapa primeiro</p>
        <p id="km" class="comentario-menor" style="padding-left: 2%;"></p>
        <p id="ha" class="comentario-menor" style="padding-left: 2%;"></p>
        
        <div id="button" style="display: none;" class="button" onclick="changePage('custos')"> Calcular receita! </div>
    </div>
    
    <script src="containt.js"></script>
    <script>
        window.onload = function() {
            
            const iframe = document.getElementById("iframe");
            const areaM = document.getElementById("m");
            const areaKM = document.getElementById("km");
            const areaHA = document.getElementById("ha");
            const button = document.getElementById("button");
            areaM.style.display = "inline-block";
            
            function checkIframe() {

                if (iframe && iframe.contentWindow.area) {
                    var area = iframe.contentWindow.area;
                    areaHA.innerText = (area / 10000).toFixed(2) + " Hectares(ha)";
                    areaHA.style.display = "inline-block";
                    areaKM.innerText = (area / 1000000).toFixed(2) + " Quilômetros quadrados (km²)";
                    areaKM.style.display = "inline-block";
                    areaM.innerText = (area).toFixed(0) + " Metros quadrados (m²)";
                    localStorage.setItem("area", (area / 10000).toFixed(2));
                    button.style.display = "block";
                }
            }

            setInterval(checkIframe, 100);
        }
    </script>
</body>

</html>